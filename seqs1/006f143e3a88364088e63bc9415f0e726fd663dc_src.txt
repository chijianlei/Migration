@ TargetApi ( Build . VERSION_CODES . FROYO ) public class ManageNotification  
if ( ManagePreferences . notifyOverrideVolume ( ) ) return  
Log . v ( "Grab Audio Focus" )  
AudioManager am = ( AudioManager ) context . getSystemService ( Context . AUDIO_SERVICE )  
am . requestAudioFocus ( afm , AudioManager . STREAM_NOTIFICATION , AudioManager . AUDIOFOCUS_GAIN_TRANSIENT )  
int restoreMode = ManagePreferences . restoreMode ( )  
int restoreVol = ManagePreferences . restoreVol ( )  
if ( restoreMode < 0 && restoreVol < 0 )  
int curMode = am . getRingerMode ( )  
if ( curMode != AudioManager . RINGER_MODE_NORMAL )  
am . setRingerMode ( AudioManager . RINGER_MODE_NORMAL )  
ManagePreferences . setRestoreMode ( curMode )  
int maxVol = am . getStreamMaxVolume ( AudioManager . STREAM_NOTIFICATION )  
int curVol = am . getStreamVolume ( AudioManager . STREAM_NOTIFICATION )  
if ( curVol != maxVol )  
am . setStreamVolume ( AudioManager . STREAM_NOTIFICATION , maxVol , 0 )  
ManagePreferences . setRestoreVol ( curVol )  
