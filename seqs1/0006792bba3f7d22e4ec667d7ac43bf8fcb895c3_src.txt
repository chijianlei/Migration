updateRanges ( range , r . getRuleIntervals ( ) )  
res = res + ruleSize + r . getOccurrences ( ) . size ( ) * 2  
