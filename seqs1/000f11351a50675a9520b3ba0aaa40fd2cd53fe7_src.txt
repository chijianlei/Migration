( ( ExtractTask ) project . getTasks ( ) . getByName ( projectString ( TASK_PROJECT_EXTRACT_SRC , patcher ) ) ) . from ( patched )  
if ( lastPatcher != null ) 
patch . dependsOn ( projectString ( TASK_PROJECT_PATCH , lastPatcher ) )  
patch . setInJar ( delayedFile ( projectString ( JAR_PROJECT_PATCHED , lastPatcher ) ) )  
patch . addInject ( lastPatcher . getDelayedSourcesDir ( ) )  
patch . addInject ( lastPatcher . getDelayedResourcesDir ( ) )  
ApplyS2STask retromap = ( ApplyS2STask ) project . getTasks ( ) . getByName ( projectString ( TASK_PROJECT_RETROMAP , patcher ) )  
genPatches . addOriginalSource ( projectString ( TASK_PROJECT_REMAP_JAR , patcher ) )  
genPatches . addOriginalSource ( genFrom . getDelayedSourcesDir ( ) )  
this . inject ( getInjects ( ) , sourceMap , resourceMap )  
getLogger ( ) . info ( "Applying patches" )  
private void inject ( FileCollection injects , final Map < String , String > sourceMap , final Map < String , byte [ ] > resourceMap ) throws IOException 
getProject ( ) . fileTree ( inject ) . visit ( visitor )  
if ( inject . getName ( ) . endsWith ( ".jar" ) || inject . getName ( ) . endsWith ( ".zip" ) ) 
